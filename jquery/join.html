<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>javapic</title>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<main>
    <section class="signup">
        <h2>join us</h2>
        <form id="signup" method="post" novalidate>
            <label for="name">name</label>
            <input type="text" name="name" placeholder="input_name" required/>
            <label for="username">username</label>
            <input type="text" name="username" placeholder="input_username" required/>
            <label for="email">email</label>
            <input type="email" name="email" placeholder="youremail@place.com" required/>
            <input type="submit" name="submit" id="submit" value="let's develop something"/>
        </form>
    </section>
</main>


// ***** name = document.querySelector("[name=name]")
// ***** username = document.querySelector("[username=username]")

// **** if func only called once, make it anonymous
// *** If it's called only by one other function, make it a sub-function of that function
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="js/utilities.js"></script>;
<script>
(function () {
    console.log("Button was clicked.  Function called");
    var form = document.getElementById("signup");
    form.noValidate=true;
    addEvent(form, 'submit', function(e){
        e.preventDefault();
        var elements = this.elements;
        var name = elements.name.value;
        var username = elements[1].value;
        var email = elements[2].value;
        console.log("name is:" + name);
        console.log("username is:" + username);
        console.log("email is:" + email);
        if (name === '') {
            console.log("no name entered");
        };
        if (username === '') {
            console.log("no username entered");
        };
        /* if ((re.test(email)) !== true) {
            alert("Invalid email address");
        } */
        if (ValidateEmail(email) !== true) {
            alert("Invalid Email Address");
            //form.reset();
            // elements[2].reset();
        } else {
            form.setAttribute("action", "gallery.html?" + name); 

        }
        // form.setAttribute("action", "gallery.html?" + name); 
        var loc = "'gallery.html?' + name"; 
        console.log(loc);
        window.location = loc;

    });
}());


function ValidateEmail(email) {
    var re = /^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;

    if ((re.test(email))) {
        return true;
    }
    alert("Invalid email address");
    return false
}

</script>
</body>
</html>